<div>
    Choose Any Date
    <div class='poll'>
        <ul class ="date_list" style ='list-style-type:none;padding:0px'>
            <li><input type='checkbox' class='date_poll'> Date:
                <div class="progress">
                    <div class="progress-bar" role="progressbar" aria-valuenow="70"
                    aria-valuemin="0" aria-valuemax="100" style="width:60%">
                    </div>
                </div>
            </li>
        </ul>
    </div>
    <div>
        <div class='input-group date' id='datetimepicker1'>
            <input type='text' class="form-control" id='new_date' readonly/>
            <span class="input-group-addon" id="calendar">
                <span class="glyphicon glyphicon-calendar"></span>
            </span>
        </div>
        <button type='button' id='add_date'>+</button>
    </div>
</div>

<script>
    $(function () {
        let date = $('#datetimepicker1').datetimepicker();
        $('#datetimepicker1').data("DateTimePicker").ignoreReadonly(true);
        
        $('#add_date').on('click',()=>{
            if($('#new_date').val() != ""){
                console.log($('#new_date').val());
                socket.emit('date_created',$('#new_date').val());
                count++;
            }else{
                alert('Invalid date');
            }
        })
        $('.poll').on('click','.date_poll', function(){
            
            if($(this).prop('checked')==true){
                socket.emit('vote_change','join')
            }else if($(this).prop('checked') == false){
                socket.emit('vote_change','no_join')
            }
        })

        socket.on('date_table_updated',(date)=>{
            
                $('.date_lsit').replaceAll(data)
        })
    });

</script>

