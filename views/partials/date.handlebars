<div>
    Choose Any Date
    <div class='poll'>
    </div>
    <div>
        <div class='input-group date' id='datetimepicker1'>
            <input type='text' class="form-control" id='new_date' readonly/>
            <span class="input-group-addon" id="calendar">
                <span class="glyphicon glyphicon-calendar"></span>
            </span>
        </div>
        <button type='button' id='add_date'>+</button>
    </div>
</div>

<script>
    let count =0;
    let vote =[];
    $(function () {
        let date = $('#datetimepicker1').datetimepicker();
        $('#datetimepicker1').data("DateTimePicker").ignoreReadonly(true);
        
        $('#add_date').on('click',()=>{
            if($('#new_date').val() != ""){
                console.log($('#new_date').val());
                socket.emit('date_created',$('#new_date').val());
                count++;
            }else{
                alert('Invalid date');
            }
        })
        $('.poll').on('click','.date_poll', function(){
            
            if($(this).prop('checked')==true){
                socket.emit('vote_change','join')
            }else if($(this).prop('checked') == false){
                socket.emit('vote_change','no_join')
            }
            
        })

        socket.on('date_created',(date)=>{
            let row =(`<ul><input type="checkbox"  name='date_poll' class="date_poll" >
                            ${date}</ul>`);
                $('.poll').append(row)
        })

    });

</script>

